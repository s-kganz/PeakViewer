#: kivy 1.11.1
#: set PARAMETER_HEIGHT 30
#: import expanduser os.path.expanduser

<FileFieldWidget@BoxLayout>:
    text_field: text_field
    BoxLayout:
        orientation: 'horizontal'
        spacing: 5
        TextInput:
            id: text_field
            readonly: True
        Button:
            size_hint_x: None
            width: PARAMETER_HEIGHT
            text: '...'
            on_release: Factory.LoadDialog(text_field).open()

<AbstractParameterWidget@BoxLayout>:
    size_hint_y: None
    height: max(PARAMETER_HEIGHT, label.height)
    BoxLayout:
        id: layout
        orientation: 'horizontal'
        Label:
            size_hint_y: None
            height: self.texture_size[1]
            id: label
            text: root.label_text
            text_size: self.width, None
            padding_x: 5

<ParameterListDialog@Popup>:
    button_ok: button_ok
    BoxLayout:
        padding: 5
        spacing: 5
        orientation: 'vertical'
        ScrollView:
            id: scroll
            height: max(self.parent.height*.9, self.parent.height - 30)
            do_scroll_y: True
            GridLayout:
                height: self.minimum_height
                id: content_area
                orientation: 'vertical'
                size_hint_y: None
                cols: 1
                spacing: 5
                # ** widgets added here during instantiation **

        StackLayout:
            orientation: 'rl-tb'
            spacing: 5
            size_hint_y: None
            height: min(self.parent.height*.1, 30)
            Button:
                size_hint_x: None
                width: 60
                text: 'Cancel'
                on_release: root.dismiss()
            Button:
                id: button_ok
                size_hint_x: None
                width: 60
                text: 'OK'
                on_release: root.dismiss(); root._execute()

<LoadDialog@Popup>:
    filechooser: filechooser
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            dirselect: False
            path: expanduser('~')

        StackLayout:
            orientation: 'rl-tb'
            spacing: 5
            size_hint_y: None
            height: min(self.parent.height*.1, 30)
            Button:
                size_hint_x: None
                width: 60
                text: 'Cancel'
                on_release: root.dismiss()
            Button:
                id: button_ok
                size_hint_x: None
                width: 60
                text: 'OK'
                on_release: root.post_result(); root.dismiss()